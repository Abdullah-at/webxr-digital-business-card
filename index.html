  <!doctype html>
  <html lang="en">
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>WebXR Digital Business Card</title>

      <!-- Styles - imported in main.js -->

      <!-- A-Frame + MindAR -->
      <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/aframe-extras@7.5.2/dist/aframe-extras.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    </head>

    <body>
      <!-- Custom Tracker Overlay (shown while scanning) -->
      <div id="tracker-overlay">
        <img id="tracker-img" src="" alt="Scan target">
      </div>

      <!-- HUD - COMMENTED OUT (replaced by 3D cube) -->
      
      <div id="hud">
        <div class="main-buttons">
          <button class="pill" id="btn-1">About Me</button>
          <button class="pill" id="btn-2">Projects</button>
        </div>
      </div>
      

      <!-- App -->
      <script>
        // Detect base path - works for both localhost (Vite dev) and GitHub Pages
        const hostname = window.location.hostname;
        const pathname = window.location.pathname;
        const isLocalhost = hostname === 'localhost' || hostname === '127.0.0.1' || hostname.includes('192.168') || hostname.includes('.local');
        // Vite uses base path even in dev, so always use it
        const BASE_PATH = '/webxr-digital-business-card';
        window.AR_BASE_PATH = BASE_PATH;
        
        console.log('[INIT] Base path:', BASE_PATH, 'hostname:', hostname, 'pathname:', pathname);
        
        // Set tracker image immediately
        const trackerImg = document.getElementById('tracker-img');
        if (trackerImg) {
          trackerImg.src = `${BASE_PATH}/assets/tracker.png`;
          console.log('[INIT] Tracker image:', trackerImg.src);
        }
      </script>

      <!-- WebAR scene -->
      <a-scene
        id="ar-scene"
        mindar-image="imageTargetSrc: /webxr-digital-business-card/targets.mind; filterMinCF: 0.001; filterBeta: 0; missTolerance: 30; autoStart: false"
        device-orientation-permission-ui="enabled: false"
        vr-mode-ui="enabled: false"
        renderer="alpha: true; colorManagement: true; antialias: true"
        embedded>

        <!-- Preload assets -->
        <a-assets>
          <!-- Your cleaned models exported from Blender -->
          <a-asset-item id="ufoModel"  src="/webxr-digital-business-card/assets/ufo/UFO.glb"></a-asset-item>
          <a-asset-item id="cubeModel" src="/webxr-digital-business-card/assets/ufo/cube.glb"></a-asset-item>
        </a-assets>

        <!-- MindAR camera -->
        <a-camera look-controls="enabled: false"></a-camera>

        <!-- Marker root: layers + UFO will be added by main.js -->
        <a-entity mindar-image-target="targetIndex: 0" id="markerRoot"></a-entity>
      </a-scene>
      
      <script>
        // Add error listeners to help debug
        const scene = document.getElementById('ar-scene');
        if (scene) {
          scene.addEventListener('loaded', () => {
            console.log('[AFRAME] Scene loaded successfully');
            
            // Check if MindAR component initialized
            setTimeout(() => {
              const mindarComponent = scene.components['mindar-image'];
              if (mindarComponent) {
                console.log('[MINDAR] Component initialized:', mindarComponent);
              } else {
                console.error('[MINDAR] ❌ Component NOT initialized!');
              }
              
              // Check if system exists
              const mindarSystem = scene.systems['mindar-image-system'];
              if (mindarSystem) {
                console.log('[MINDAR] System found:', mindarSystem);
              } else {
                console.warn('[MINDAR] System not found');
              }
            }, 1000);
          });
          
          scene.addEventListener('error', (e) => {
            console.error('[AFRAME] Scene error:', e);
          });
        }
        
        // Start MindAR after user interaction (required for HTTPS/GitHub Pages)
        let mindarStarted = false;
        const startMindAR = () => {
          if (mindarStarted) return;
          mindarStarted = true;
          
          const scene = document.getElementById('ar-scene');
          if (!scene) {
            console.error('[MINDAR] Scene not found');
            return;
          }
          
          // Wait for scene to be ready
          if (scene.hasLoaded) {
            doStartMindAR();
          } else {
            scene.addEventListener('loaded', doStartMindAR, { once: true });
          }
        };
        
        const doStartMindAR = () => {
          const scene = document.getElementById('ar-scene');
          const mindarSystem = scene.systems['mindar-image-system'];
          
          if (mindarSystem) {
            console.log('[MINDAR] Starting AR system on GitHub Pages...');
            try {
              mindarSystem.start();
              console.log('[MINDAR] ✅ AR system started successfully');
            } catch (err) {
              console.error('[MINDAR] ❌ Error starting AR system:', err);
            }
          } else {
            console.error('[MINDAR] ❌ System not found');
            // Try alternative: use component start method
            const mindarComponent = scene.components['mindar-image'];
            if (mindarComponent && typeof mindarComponent.start === 'function') {
              try {
                mindarComponent.start();
                console.log('[MINDAR] ✅ Started via component method');
              } catch (err) {
                console.error('[MINDAR] ❌ Error starting via component:', err);
              }
            }
          }
        };
        
        // Start on any user interaction (click, touch, etc.)
        ['click', 'touchstart'].forEach(eventType => {
          document.addEventListener(eventType, startMindAR, { once: true, passive: true });
        });
        
        // Also try to start after a short delay (fallback)
        setTimeout(() => {
          if (!mindarStarted) {
            console.log('[MINDAR] Attempting auto-start after delay...');
            startMindAR();
          }
        }, 2000);
      </script>
      <script type="module" src="./src/main.js"></script>
    </body>
  </html>
